  <div class="overall-wrapper" id="nestjsAuthGuards">
        <div class="wrapper">
            <div class="swap" onclick="toggleFullscreen()" title="Toggle view">⛶</div>
            
            <div class="header">
                <p>
                    <span class="question">What:</span>
                    <strong>D3 Zoom & Pan</strong> allows interactive zooming and panning of chart elements.
                </p>
                <p>
                    <span class="question">Why:</span>
                    Inspect large datasets or chart regions dynamically by zooming in/out or panning.
                </p>
                <p>
                    <span class="question">Where:</span>
                    Scatterplots, line charts, area charts, or any SVG visualization needing zoom/pan.
                </p>
            </div>
        </div>

        <div class="examples">
            <h3>D3 Zoom & Pan Examples — Step-by-step</h3>

            <div class="instructions">
                <strong>Instructions:</strong> Use mouse wheel to zoom, click and drag to pan. Double-click to reset zoom.
            </div>

            <!-- Example 1: Scatter Plot + Zoom/Pan -->
            <div class="step">
                <h2>1. Scatter Plot + Zoom/Pan</h2>
                <p>Zoom in/out and pan the scatter points dynamically.</p>

                <pre><code><span class="comment">// sample data</span>
<span class="keyword">const</span> data1 = Array.from(&#125;length: <span class="number">20</span>&#125;, (_, i) => (&#125;x: i*<span class="number">20</span>, y: Math.random()*<span class="number">100</span>&#125;));

<span class="comment">// scales</span>
<span class="keyword">const</span> x1 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">400</span>]).range([<span class="number">10</span>,<span class="number">390</span>]);
<span class="keyword">const</span> y1 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">140</span>,<span class="number">10</span>]);

<span class="keyword">const</span> svg1 = d3.select(<span class="string">'#zoom-scatter'</span>);
svg1.selectAll(<span class="string">'*'</span>).remove();

<span class="comment">// create container for zoomable content</span>
<span class="keyword">const</span> content1 = svg1.append(<span class="string">'g'</span>);

<span class="comment">// draw points</span>
content1.selectAll(<span class="string">'circle'</span>)
  .data(data1)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, d => x1(d.x))
  .attr(<span class="string">'cy'</span>, d => y1(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">5</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>);

<span class="comment">// zoom behavior</span>
<span class="keyword">const</span> zoom1 = d3.zoom()
  .scaleExtent([<span class="number">0.5</span>,<span class="number">5</span>])
  .on(<span class="string">'zoom'</span>, (event) => &#125;
    content1.attr(<span class="string">'transform'</span>, event.transform);
  &#125;);

<span class="comment">// apply zoom to svg</span>
svg1.call(zoom1);</code></pre>

                <div class="output-section">
                    <p><strong>Output:</strong></p>
                    <svg id="zoom-scatter" width="420" height="160" class="viz-container"></svg>
                </div>
            </div>

            <!-- Example 2: Line Chart + Zoom/Pan -->
            <div class="step">
                <h2>2. Line Chart + Zoom/Pan</h2>
                <p>Zoom or pan the line chart to inspect data points.</p>

                <pre><code><span class="comment">// sample data</span>
<span class="keyword">const</span> data2 = [
  &#125;x:<span class="number">0</span>,y:<span class="number">30</span>&#125;,&#125;x:<span class="number">50</span>,y:<span class="number">80</span>&#125;,
  &#125;x:<span class="number">100</span>,y:<span class="number">45</span>&#125;,&#125;x:<span class="number">150</span>,y:<span class="number">120</span>&#125;,
  &#125;x:<span class="number">200</span>,y:<span class="number">70</span>&#125;,&#125;x:<span class="number">250</span>,y:<span class="number">100</span>&#125;
];

<span class="keyword">const</span> x2 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">250</span>]).range([<span class="number">40</span>,<span class="number">380</span>]);
<span class="keyword">const</span> y2 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">140</span>]).range([<span class="number">120</span>,<span class="number">20</span>]);

<span class="keyword">const</span> svg2 = d3.select(<span class="string">'#zoom-line'</span>);
<span class="keyword">const</span> content2 = svg2.append(<span class="string">'g'</span>);

<span class="comment">// add axes</span>
content2.append(<span class="string">'g'</span>)
  .attr(<span class="string">'transform'</span>, <span class="string">'translate(0,120)'</span>)
  .call(d3.axisBottom(x2));

content2.append(<span class="string">'g'</span>)
  .attr(<span class="string">'transform'</span>, <span class="string">'translate(40,0)'</span>)
  .call(d3.axisLeft(y2));

<span class="comment">// line generator</span>
<span class="keyword">const</span> lineGen2 = d3.line()
  .x(d => x2(d.x))
  .y(d => y2(d.y))
  .curve(d3.curveMonotoneX);

<span class="comment">// draw line and points</span>
content2.append(<span class="string">'path'</span>)
  .datum(data2)
  .attr(<span class="string">'d'</span>, lineGen2)
  .attr(<span class="string">'fill'</span>, <span class="string">'none'</span>)
  .attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>)
  .attr(<span class="string">'stroke-width'</span>, <span class="number">3</span>);

content2.selectAll(<span class="string">'circle'</span>)
  .data(data2)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, d => x2(d.x))
  .attr(<span class="string">'cy'</span>, d => y2(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">5</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>);

<span class="keyword">const</span> zoom2 = d3.zoom()
  .scaleExtent([<span class="number">0.5</span>,<span class="number">5</span>])
  .on(<span class="string">'zoom'</span>, (event) => &#125;
    content2.attr(<span class="string">'transform'</span>, event.transform);
  &#125;);

svg2.call(zoom2);</code></pre>

                <div class="output-section">
                    <p><strong>Output:</strong></p>
                    <svg id="zoom-line" width="420" height="160" class="viz-container"></svg>
                </div>
            </div>

            <!-- Example 3: Area Chart + Zoom/Pan -->
            <div class="step">
                <h2>3. Area Chart + Zoom/Pan</h2>
                <p>Zoom or pan the area chart interactively.</p>

                <pre><code><span class="comment">// sample data</span>
<span class="keyword">const</span> data3 = [
  &#125;x:<span class="number">0</span>,y:<span class="number">20</span>&#125;,&#125;x:<span class="number">50</span>,y:<span class="number">60</span>&#125;,
  &#125;x:<span class="number">100</span>,y:<span class="number">40</span>&#125;,&#125;x:<span class="number">150</span>,y:<span class="number">80</span>&#125;,
  &#125;x:<span class="number">200</span>,y:<span class="number">50</span>&#125;,&#125;x:<span class="number">250</span>,y:<span class="number">70</span>&#125;
];

<span class="keyword">const</span> x3 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">250</span>]).range([<span class="number">40</span>,<span class="number">380</span>]);
<span class="keyword">const</span> y3 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">120</span>,<span class="number">20</span>]);

<span class="keyword">const</span> svg3 = d3.select(<span class="string">'#zoom-area'</span>);
<span class="keyword">const</span> content3 = svg3.append(<span class="string">'g'</span>);

<span class="comment">// add axes</span>
content3.append(<span class="string">'g'</span>)
  .attr(<span class="string">'transform'</span>, <span class="string">'translate(0,120)'</span>)
  .call(d3.axisBottom(x3));

content3.append(<span class="string">'g'</span>)
  .attr(<span class="string">'transform'</span>, <span class="string">'translate(40,0)'</span>)
  .call(d3.axisLeft(y3));

<span class="comment">// area generator</span>
<span class="keyword">const</span> areaGen3 = d3.area()
  .x(d => x3(d.x))
  .y0(y3(<span class="number">0</span>))
  .y1(d => y3(d.y))
  .curve(d3.curveMonotoneX);

<span class="comment">// draw area</span>
content3.append(<span class="string">'path'</span>)
  .datum(data3)
  .attr(<span class="string">'d'</span>, areaGen3)
  .attr(<span class="string">'fill'</span>, <span class="string">'rgba(43, 140, 190, 0.6)'</span>)
  .attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>)
  .attr(<span class="string">'stroke-width'</span>, <span class="number">2</span>);

<span class="keyword">const</span> zoom3 = d3.zoom()
  .scaleExtent([<span class="number">0.5</span>,<span class="number">5</span>])
  .on(<span class="string">'zoom'</span>, (event) => &#125;
    content3.attr(<span class="string">'transform'</span>, event.transform);
  &#125;);

svg3.call(zoom3);</code></pre>

                <div class="output-section">
                    <p><strong>Output:</strong></p>
                    <svg id="zoom-area" width="420" height="160" class="viz-container"></svg>
                </div>
            </div>

            <!-- Example 4: Advanced with Reset Button -->
            <div class="step">
                <h2>4. Advanced: Multi-Series with Reset Button</h2>
                <p>Multiple data series with zoom controls and reset functionality.</p>

                <pre><code><span class="comment">// multiple series data</span>
<span class="keyword">const</span> series1 = Array.from(&#125;length: <span class="number">15</span>&#125;, (_, i) => (&#125;x: i*<span class="number">15</span>, y: <span class="number">30</span> + Math.sin(i*<span class="number">0.5</span>)*<span class="number">20</span>&#125;));
<span class="keyword">const</span> series2 = Array.from(&#125;length: <span class="number">15</span>&#125;, (_, i) => (&#125;x: i*<span class="number">15</span>, y: <span class="number">60</span> + Math.cos(i*<span class="number">0.3</span>)*<span class="number">25</span>&#125;));

<span class="keyword">const</span> x4 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">210</span>]).range([<span class="number">40</span>,<span class="number">380</span>]);
<span class="keyword">const</span> y4 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">120</span>,<span class="number">20</span>]);

<span class="keyword">const</span> svg4 = d3.select(<span class="string">'#zoom-advanced'</span>);
<span class="keyword">const</span> content4 = svg4.append(<span class="string">'g'</span>);

<span class="comment">// add grid lines</span>
content4.append(<span class="string">'g'</span>)
  .attr(<span class="string">'class'</span>, <span class="string">'grid'</span>)
  .attr(<span class="string">'transform'</span>, <span class="string">'translate(0,120)'</span>)
  .call(d3.axisBottom(x4).tickSize(-<span class="number">100</span>).tickFormat(<span class="string">''</span>));

<span class="comment">// draw both series</span>
<span class="keyword">const</span> line4 = d3.line().x(d => x4(d.x)).y(d => y4(d.y)).curve(d3.curveMonotoneX);

content4.append(<span class="string">'path'</span>).datum(series1).attr(<span class="string">'d'</span>, line4)
  .attr(<span class="string">'fill'</span>, <span class="string">'none'</span>).attr(<span class="string">'stroke'</span>, <span class="string">'#e74c3c'</span>).attr(<span class="string">'stroke-width'</span>, <span class="number">2</span>);

content4.append(<span class="string">'path'</span>).datum(series2).attr(<span class="string">'d'</span>, line4)
  .attr(<span class="string">'fill'</span>, <span class="string">'none'</span>).attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>).attr(<span class="string">'stroke-width'</span>, <span class="number">2</span>);

<span class="keyword">const</span> zoom4 = d3.zoom()
  .scaleExtent([<span class="number">0.5</span>,<span class="number">10</span>])
  .on(<span class="string">'zoom'</span>, (event) => &#125;
    content4.attr(<span class="string">'transform'</span>, event.transform);
  &#125;);

svg4.call(zoom4);

<span class="comment">// reset function</span>
<span class="keyword">function</span> resetZoom() &#125;
  svg4.transition().duration(<span class="number">750</span>).call(zoom4.transform, d3.zoomIdentity);
&#125;</code></pre>

                <div class="output-section">
                    <p><strong>Output:</strong></p>
                    <button onclick="resetAdvancedZoom()" style="margin: 0 20px 10px 20px; padding: 8px 16px; background: #2b8cbe; color: white; border: none; border-radius: 4px; cursor: pointer;">Reset Zoom</button>
                    <svg id="zoom-advanced" width="420" height="160" class="viz-container"></svg>
                </div>
            </div>
        </div>
    </div>