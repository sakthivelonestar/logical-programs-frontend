<div class="overall-wrapper" appMaximize #nestjsAuthGuards="maximize" id="nestjsAuthGuards">
  <div class="wrapper">
    <img class="swap" *ngIf="nestjsAuthGuards.checkfullscreen() == 'hide'" 
         (click)="nestjsAuthGuards.toggle()" src="../../../assets/expand.svg" alt="Expand">
    <img class="swap" *ngIf="nestjsAuthGuards.checkfullscreen() != 'hide'" 
         (click)="nestjsAuthGuards.toggle()" src="../../../assets/Minimize icon.svg" alt="Minimize">

    <div class="header">
      <p>
        <span class="question">What:</span>
        <strong>D3 Brush Component</strong> lets users select regions in a chart interactively.
      </p>
      <p>
        <span class="question">Why:</span>
        Useful for filtering, highlighting, or zooming into specific data regions dynamically.
      </p>
      <p>
        <span class="question">Where:</span>
        Scatterplots, line charts, area charts, or any interactive chart requiring selection.
      </p>
    </div>
  </div>

  <div class="examples">
    <h3>D3 Brush Examples â€” Step-by-step</h3>

    <!-- Example 1: Scatter plot with brush -->
   <div class="step">
  <h2>1. Scatter Plot + Brush</h2>
  <p>Highlight points inside the selection rectangle.</p>

  <pre><code>
<span class="comment">// sample data</span>
<span class="keyword">interface</span> <span class="type">Point</span> &#123; x: <span class="keyword">number</span>; y: <span class="keyword">number</span>; &#125;
<span class="keyword">const</span> data1: <span class="type">Point[]</span> = Array.from(&#123;length: <span class="number">20</span>&#125;, (_, i) =&gt; (&#123;x: i*<span class="number">20</span>, y: Math.random()*<span class="number">100</span>&#125;));

<span class="comment">// scales</span>
<span class="keyword">const</span> xScale = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">400</span>]).range([<span class="number">10</span>,<span class="number">390</span>]);
<span class="keyword">const</span> yScale = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">140</span>,<span class="number">10</span>]);

<span class="keyword">const</span> svg = d3.select(<span class="string">'#brush-scatter'</span>);
svg.selectAll(<span class="string">'*'</span>).remove();

<span class="comment">// draw points</span>
svg.selectAll(<span class="string">'circle'</span>)
  .data(data1)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, (d: <span class="type">Point</span>) =&gt; xScale(d.x))
  .attr(<span class="string">'cy'</span>, (d: <span class="type">Point</span>) =&gt; yScale(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">5</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>);

<span class="comment">// brush setup</span>
<span class="keyword">const</span> brush = d3.brush()
  .extent([[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">400</span>,<span class="number">150</span>]])
  .on(<span class="string">'brush end'</span>, (event) =&gt; &#123;
    <span class="keyword">const</span> [[x0,y0],[x1b,y1b]] = event.selection || [[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>]];
    svg.selectAll(<span class="string">'circle'</span>)
        .attr(<span class="string">'fill'</span>, (d: <span class="type">Point</span>) =&gt; 
            (xScale(d.x) &gt;= x0 &amp;&amp; xScale(d.x) &lt;= x1b &amp;&amp; yScale(d.y) &gt;= y0 &amp;&amp; yScale(d.y) &lt;= y1b) 
            ? <span class="string">'#f03b20'</span> 
            : <span class="string">'#2b8cbe'</span>
        );
  &#125;);

svg.append(<span class="string">'g'</span>).call(brush);
  </code></pre>

  <p><strong>Output:</strong></p>
  <svg id="brush-scatter" width="420" height="160" class="viz-container"></svg>
</div>


    <!-- Example 2: Line chart + brush -->
    <div class="step">
      <h2>2. Line Chart + Brush</h2>
      <p>Highlight points on a line chart.</p>

      <pre><code>
<span class="comment">// sample data</span>
<span class="keyword">interface</span> <span class="type">Point</span> &#123; x: <span class="keyword">number</span>; y: <span class="keyword">number</span>; &#125;
<span class="keyword">const</span> data2: <span class="type">Point[]</span> = [
  &#123;x:<span class="number">0</span>, y:<span class="number">30</span>&#125;,
  &#123;x:<span class="number">50</span>, y:<span class="number">80</span>&#125;,
  &#123;x:<span class="number">100</span>, y:<span class="number">45</span>&#125;,
  &#123;x:<span class="number">150</span>, y:<span class="number">120</span>&#125;,
  &#123;x:<span class="number">200</span>, y:<span class="number">70</span>&#125;,
  &#123;x:<span class="number">250</span>, y:<span class="number">100</span>&#125;
];

<span class="comment">// scales</span>
<span class="keyword">const</span> xScale = d3.scaleLinear().domain([<span class="number">0</span>, <span class="number">250</span>]).range([<span class="number">10</span>, <span class="number">390</span>]);
<span class="keyword">const</span> yScale = d3.scaleLinear().domain([<span class="number">0</span>, <span class="number">140</span>]).range([<span class="number">140</span>, <span class="number">10</span>]);

<span class="comment">// line generator</span>
<span class="keyword">const</span> lineGen = d3.line&lt;<span class="type">Point</span>&gt;()
  .x((d: <span class="type">Point</span>) =&gt; xScale(d.x))
  .y((d: <span class="type">Point</span>) =&gt; yScale(d.y))
  .curve(d3.curveMonotoneX);

<span class="keyword">const</span> svg = d3.select(<span class="string">'#brush-line'</span>);
svg.selectAll(<span class="string">'*'</span>).remove();

<span class="comment">// draw line path</span>
svg.append(<span class="string">'path'</span>)
  .datum(data2)
  .attr(<span class="string">'d'</span>, lineGen as any)
  .attr(<span class="string">'fill'</span>, <span class="string">'none'</span>)
  .attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>)
  .attr(<span class="string">'stroke-width'</span>, <span class="number">3</span>);

<span class="comment">// draw points</span>
svg.selectAll(<span class="string">'circle'</span>)
  .data(data2)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, (d: <span class="type">Point</span>) =&gt; xScale(d.x))
  .attr(<span class="string">'cy'</span>, (d: <span class="type">Point</span>) =&gt; yScale(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">5</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>);

<span class="comment">// brush setup</span>
<span class="keyword">const</span> brush = d3.brush()
  .extent([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">400</span>, <span class="number">150</span>]])
  .on(<span class="string">'brush end'</span>, (event) =&gt; &#123;
    <span class="keyword">const</span> [[x0, y0], [x1b, y1b]] = event.selection || [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>]];
    svg.selectAll(<span class="string">'circle'</span>)
        .attr(<span class="string">'fill'</span>, (d: <span class="type">any</span>) =&gt; 
            (xScale(d.x) &gt;= x0 &amp;&amp; xScale(d.x) &lt;= x1b &amp;&amp; yScale(d.y) &gt;= y0 &amp;&amp; yScale(d.y) &lt;= y1b) 
            ? <span class="string">'#f03b20'</span> 
            : <span class="string">'#2b8cbe'</span>
        );
  &#125;);

svg.append(<span class="string">'g'</span>).call(brush);
</code></pre>

      <p><strong>Output:</strong></p>
      <svg id="brush-line" width="420" height="160" class="viz-container"></svg>
    </div>
  </div>
</div>
