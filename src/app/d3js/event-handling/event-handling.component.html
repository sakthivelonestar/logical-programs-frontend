<div class="overall-wrapper" appMaximize #nestjsAuthGuards="maximize" id="nestjsAuthGuards">
  <div class="wrapper">
    <img class="swap" *ngIf="nestjsAuthGuards.checkfullscreen() == 'hide'" 
         (click)="nestjsAuthGuards.toggle()" src="../../../assets/expand.svg" alt="Expand">
    <img class="swap" *ngIf="nestjsAuthGuards.checkfullscreen() != 'hide'" 
         (click)="nestjsAuthGuards.toggle()" src="../../../assets/Minimize icon.svg" alt="Minimize">

    <div class="header">
      <p>
        <span class="question">What:</span>
        <strong>D3 Event Handling</strong> allows you to respond to user interactions like <code>click</code>, <code>mouseover</code>, <code>mouseout</code>, and <code>drag</code>.
      </p>
      <p>
        <span class="question">Why:</span>
        Interactive charts improve user experience, enabling tooltips, highlights, selection, or dragging elements dynamically.
      </p>
      <p>
        <span class="question">Where:</span>
        Scatterplots, line charts, area charts, bar charts, node-link diagrams, or any SVG visualization needing user interaction.
      </p>
    </div>
  </div>

  <div class="examples">
    <h3>D3 Event Handling Examples â€” Step-by-step</h3>

    <!-- Example 1: Scatter Plot + Mouse Events -->
    <div class="step">
      <h2>1. Scatter Plot with Mouseover & Click</h2>
      <p>Hover to highlight a point and click to log its data.</p>

      <pre><code>
<span class="comment">// sample data</span>
<span class="keyword">const</span> data1 = Array.from(&#123;length: <span class="number">15</span>&#125;, (_, i) =&gt; (&#123;x: i*<span class="number">20</span>, y: Math.random()*<span class="number">100</span>&#125;));

<span class="keyword">const</span> x1 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">300</span>]).range([<span class="number">10</span>,<span class="number">390</span>]);
<span class="keyword">const</span> y1 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">140</span>,<span class="number">10</span>]);

<span class="keyword">const</span> svg1 = d3.select(<span class="string">'#event-scatter'</span>);
svg1.selectAll(<span class="string">'*'</span>).remove();

<span class="comment">// draw points with events</span>
svg1.selectAll(<span class="string">'circle'</span>)
  .data(data1)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, d =&gt; x1(d.x))
  .attr(<span class="string">'cy'</span>, d =&gt; y1(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">6</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>)
  .on(<span class="string">'mouseover'</span>, function(event, d) &#123;
      d3.select(this).attr(<span class="string">'fill'</span>, <span class="string">'#f03b20'</span>).attr(<span class="string">'r'</span>, <span class="number">9</span>);
  &#125;)
  .on(<span class="string">'mouseout'</span>, function(event, d) &#123;
      d3.select(this).attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>).attr(<span class="string">'r'</span>, <span class="number">6</span>);
  &#125;)
  .on(<span class="string">'click'</span>, function(event, d) &#123;
      <span class="keyword">console</span>.log(<span class="string">'Clicked point:'</span>, d);
  &#125;);
      </code></pre>

      <p><strong>Output:</strong></p>
      <svg id="event-scatter" width="420" height="160" class="viz-container"></svg>
    </div>

    <!-- Example 2: Line Chart + Hover -->
    <div class="step">
      <h2>2. Line Chart with Hover Highlight</h2>
      <p>Hover over the line to highlight it.</p>

      <pre><code>
<span class="comment">// sample data</span>
<span class="keyword">const</span> data2 = [&#123;x:<span class="number">0</span>,y:<span class="number">30</span>&#125;,&#123;x:<span class="number">50</span>,y:<span class="number">80</span>&#125;,&#123;x:<span class="number">100</span>,y:<span class="number">45</span>&#125;,&#123;x:<span class="number">150</span>,y:<span class="number">120</span>&#125;,&#123;x:<span class="number">200</span>,y:<span class="number">70</span>&#125;];

<span class="keyword">const</span> x2 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">200</span>]).range([<span class="number">10</span>,<span class="number">390</span>]);
<span class="keyword">const</span> y2 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">140</span>]).range([<span class="number">140</span>,<span class="number">10</span>]);

<span class="keyword">const</span> svg2 = d3.select(<span class="string">'#event-line'</span>);
svg2.selectAll(<span class="string">'*'</span>).remove();

<span class="keyword">const</span> lineGen2 = d3.line()
  .x(d =&gt; x2(d.x))
  .y(d =&gt; y2(d.y))
  .curve(d3.curveMonotoneX);

<span class="keyword">const</span> path = svg2.append(<span class="string">'path'</span>)
  .datum(data2)
  .attr(<span class="string">'d'</span>, lineGen2)
  .attr(<span class="string">'fill'</span>, <span class="string">'none'</span>)
  .attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>)
  .attr(<span class="string">'stroke-width'</span>, <span class="number">3</span>)
  .on(<span class="string">'mouseover'</span>, function() &#123;
      d3.select(this).attr(<span class="string">'stroke'</span>, <span class="string">'#f03b20'</span>).attr(<span class="string">'stroke-width'</span>, <span class="number">5</span>);
  &#125;)
  .on(<span class="string">'mouseout'</span>, function() &#123;
      d3.select(this).attr(<span class="string">'stroke'</span>, <span class="string">'#2b8cbe'</span>).attr(<span class="string">'stroke-width'</span>, <span class="number">3</span>);
  &#125;);
      </code></pre>

      <p><strong>Output:</strong></p>
      <svg id="event-line" width="420" height="160" class="viz-container"></svg>
    </div>

    <!-- Example 3: Area Chart + Drag -->
    <div class="step">
      <h2>3. Area Chart with Drag Event</h2>
      <p>Drag points on the area chart to update their position.</p>

      <pre><code>
<span class="comment">// sample data</span>
<span class="keyword">let</span> data3 = [&#123;x:<span class="number">0</span>,y:<span class="number">20</span>&#125;,&#123;x:<span class="number">50</span>,y:<span class="number">60</span>&#125;,&#123;x:<span class="number">100</span>,y:<span class="number">40</span>&#125;,&#123;x:<span class="number">150</span>,y:<span class="number">80</span>&#125;,&#123;x:<span class="number">200</span>,y:<span class="number">50</span>&#125;];

<span class="keyword">const</span> x3 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">200</span>]).range([<span class="number">10</span>,<span class="number">390</span>]);
<span class="keyword">const</span> y3 = d3.scaleLinear().domain([<span class="number">0</span>,<span class="number">100</span>]).range([<span class="number">140</span>,<span class="number">10</span>]);

<span class="keyword">const</span> svg3 = d3.select(<span class="string">'#event-area'</span>);
svg3.selectAll(<span class="string">'*'</span>).remove();

<span class="keyword">const</span> areaGen3 = d3.area()
  .x(d =&gt; x3(d.x))
  .y0(y3(0))
  .y1(d =&gt; y3(d.y))
  .curve(d3.curveCardinal);

<span class="keyword">const</span> content3 = svg3.append(<span class="string">'g'</span>);

<span class="comment">// draw area</span>
content3.append(<span class="string">'path'</span>)
  .datum(data3)
  .attr(<span class="string">'d'</span>, areaGen3)
  .attr(<span class="string">'fill'</span>, <span class="string">'#a6bddb'</span>)
  .attr(<span class="string">'stroke'</span>, <span class="string">'#3690c0'</span>);

<span class="comment">// draw draggable circles</span>
<span class="keyword">const</span> drag = d3.drag()
  .on(<span class="string">'drag'</span>, function(event, d) &#123;
      d.y = y3.invert(event.y);
      d3.select(this).attr(<span class="string">'cy'</span>, y3(d.y));
      content3.select(<span class="string">'path'</span>).attr(<span class="string">'d'</span>, areaGen3(data3));
  &#125;);

content3.selectAll(<span class="string">'circle'</span>)
  .data(data3)
  .enter()
  .append(<span class="string">'circle'</span>)
  .attr(<span class="string">'cx'</span>, d =&gt; x3(d.x))
  .attr(<span class="string">'cy'</span>, d =&gt; y3(d.y))
  .attr(<span class="string">'r'</span>, <span class="number">6</span>)
  .attr(<span class="string">'fill'</span>, <span class="string">'#2b8cbe'</span>)
  .call(drag);
      </code></pre>

      <p><strong>Output:</strong></p>
      <svg id="event-area" width="420" height="160" class="viz-container"></svg>
    </div>

  </div>
</div>
